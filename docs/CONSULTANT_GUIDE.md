# 対話式人間関係コンサルタント - 使い方ガイド

## 🎯 概要

暦 KOYOMI は**ヒアリング型AIコンサルタント**です。

経営者・起業家が抱える人間関係の悩みを、四柱推命 + Claude APIで分析し、具体的なアドバイスを提供します。

---

## 🚀 クイックスタート

### 1. 環境セットアップ

```bash
# 依存パッケージインストール
pip install -r requirements.txt

# Anthropic API Key設定（推奨）
export ANTHROPIC_API_KEY="your-api-key-here"

# アプリ起動
streamlit run app.py
```

### 2. 基本的な使い方

#### Step 1: 相談内容を入力

```
例:
「新しいCTOを採用検討中です。
 彼は技術力は高いのですが、
 既存チームと合うか心配です。
 どう判断すべきでしょうか？」
```

#### Step 2: 関係者の情報を入力

右側のフォームに以下を入力：
- あなた自身の生年月日
- 候補者の生年月日
- 既存メンバーの生年月日（任意）

#### Step 3: 分析結果を確認

AIが以下を提供：
- **総合判断**: 採用すべきか、見送るべきか
- **理由**: なぜそう判断したか（命式の特徴から）
- **具体的なアドバイス**: すぐ実行できる3つ以上のアクション
- **タイミング**: いつ決断すべきか
- **リスクと対策**: 想定されるリスクと回避方法

---

## 💡 相談例

### 1. 採用判断

```
相談:
「エンジニアを採用したい。
 候補者は優秀だが、性格的に合うか不安」

分析結果:
✅ 採用推奨
- あなた（丙火）: ビジョン・情熱の人
- 候補者（癸水）: 冷静・技術力の人
→ 補完関係が成立

アドバイス:
1. 役割分担を明確に（あなた:方向性、相手:実装）
2. 最初の3ヶ月は週1回の1on1
3. 重要な話は事前に要点を箇条書きで共有
```

### 2. チーム編成

```
相談:
「新規事業を3人のチームで始めたい。
 このメンバーで大丈夫か？」

分析結果:
△ 条件付きで推奨
- リーダー（丙火）: 情熱・ビジョン
- メンバーA（庚金）: 実行力・決断力
- メンバーB（乙木）: 調整力・柔軟性

不足: 土のエネルギー（実務・安定）

アドバイス:
1. 4人目として土の要素を持つ人を追加推奨
2. リーダーがビジョン、Aが実行、Bが調整役
3. 週1回の全体ミーティングで方向性を確認
```

### 3. パートナーシップ判断

```
相談:
「大学時代の友人と起業を考えている。
 共同創業者として大丈夫か？」

分析結果:
✅ 推奨
- あなた（丙火）: 情熱・営業
- 友人（癸水）: 技術・分析

アドバイス:
1. 役割を明確に分ける（重複させない）
2. 戦略はあなた、実現方法は友人
3. 契約書で役割・責任を文書化
4. 最初の6ヶ月は毎週振り返り
```

### 4. タイミング判断

```
相談:
「新規事業を始めたいが、今が良いタイミングか？」

分析結果:
⚠️ 9月以降が推奨
- あなたの運気: 2026年6-8月は慎重期
- 9月以降: 拡大期に入る

アドバイス:
1. 今は準備期間として活用
2. 6-8月: 市場調査、プロトタイプ作成
3. 9月: 本格始動
4. 焦らず、基盤を固める
```

---

## 🔑 API Key設定（重要）

### なぜAPI Keyが必要？

```
四柱推命計算 → 構造化データ
   ↓
Claude API → 自然言語化
   ↓
具体的で実用的なアドバイス
```

### 設定方法

#### 方法1: 環境変数（推奨）

```bash
# ターミナルで
export ANTHROPIC_API_KEY="sk-ant-..."

# または .env ファイルに
echo 'ANTHROPIC_API_KEY=sk-ant-...' > .env
```

#### 方法2: UIから設定

アプリのサイドバー「⚙️ 設定」から入力

### API Key なしでも使える？

はい、基本的なアドバイスは表示されます。

ただし、以下の機能は制限されます：
- 詳細な理由説明
- 具体的なアクションプラン
- タイミングの詳細分析
- リスク分析

**推奨**: API Keyを設定して、フル機能を使用

---

## 📊 分析の仕組み

### 1. 相談内容の分類

```python
相談内容 → 自動分類
- 採用判断
- チーム編成
- タイミング判断
- パートナーシップ
- 人間関係
```

### 2. 命式計算

```python
生年月日 → 四柱推命計算
- 年柱・月柱・日柱・時柱
- 五行バランス
- 用神判定
```

### 3. 相性分析

```python
2人以上 → 相性計算
- 五行の相生相克
- 補完関係
- 役割適性
```

### 4. アドバイス生成

```python
命式 + 相性 + Claude API
↓
具体的なアクションプラン
```

---

## 🎯 対象ユーザー

| ユーザー | 使用場面 |
|---------|---------|
| **経営者・起業家** | 採用・パートナー選定・タイミング判断 |
| **人事担当者** | チーム編成・配置最適化 |
| **プロジェクトマネージャー** | メンバー選定・役割分担 |
| **コーチ・カウンセラー** | クライアント分析 |

---

## 🔧 トラブルシューティング

### Q1: API Keyエラーが出る

```
確認事項:
1. API Keyが正しく設定されているか
2. API Keyに権限があるか
3. クレジットが残っているか
```

### Q2: 分析が遅い

```
原因:
- Claude APIの呼び出しに時間がかかる（10-30秒）

対策:
- 辛抱強く待つ
- 関係者の人数を減らす（最大10人まで）
```

### Q3: アドバイスが表示されない

```
確認事項:
1. 生年月日が正しく入力されているか
2. API Keyが設定されているか
3. エラーメッセージを確認
```

---

## 💰 料金

### 開発コスト: $0
- 四柱推命計算は自前実装
- API不要（基本機能）

### 運用コスト（API使用時）
- Claude API: 約$0.01-0.05/相談
- 月100件の相談: 約$1-5

**非常に低コスト**で運用可能

---

## 🚀 今後の拡張

### Phase 2
- 複数人の相性分析（3-10人）
- タイミング分析の詳細化
- レポートPDF出力

### Phase 3
- 西洋占星術の統合
- 易経の統合
- 過去の相談履歴管理

---

## 📞 サポート

質問・要望は GitHub Issues へ

---

**暦 KOYOMI - 依存ではなく、自立のお手伝い**
